<Window x:Class="SilkroadLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SilkroadLauncher"
        xmlns:controls="clr-namespace:SilkroadLauncher.Controls"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"
        WindowStyle="None" ResizeMode="NoResize"
        Title="{Binding Title}" Width="800" Height="500"
        Background="Transparent"
        Loaded="Window_Loaded">
    
    <!-- Main layout -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="64"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Background -->
        <Border Grid.RowSpan="2"
                Background="{StaticResource LauncherBackgroundBrush}"
                CornerRadius="8"/>

        <!-- Header -->
        <Grid MouseLeftButtonDown="Control_MouseLeftButtonDown_DragWindow" 
              Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="192"/>
                <ColumnDefinition/>
                <ColumnDefinition Width="192"/>
            </Grid.ColumnDefinitions>
            
            <!-- Logo -->
            <Grid Margin="5,3" Background="{StaticResource LogoImageBrush}"/>

            <!-- Loading / Start -->
            <Grid Grid.Column="1">
                <Slider Style="{StaticResource SliderLoadingStyle}"
                        Visibility="{Binding IsUpdating,Converter={x:Static local:BooleanToVisibilityConverter.Instance}}"
                        IsEnabled="False"
                        Value="{Binding UpdatingPercentage}"
                        Minimum="0"
                        Maximum="100"
                        VerticalAlignment="Center"/>

                <!-- Start Game -->
                <Button Style="{StaticResource ButtonBaseStyle}"
                        Margin="50,5"
                        Background="{StaticResource ButtonStartBrush}"
                        BorderThickness="2"
                        Command="{Binding CommandStartGame}"
                        Visibility="{Binding CanStartGame,Converter={x:Static local:BooleanToVisibilityConverter.Instance}}">
                    <TextBlock Text="Start Game"
                               Margin="0,0,0,6"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold"
                               FontSize="{StaticResource FontSizeXXLarge}"/>
                </Button>
            </Grid>

            <!-- Header / Right side -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Loading as percentage / Ready -->
                <Grid Grid.RowSpan="3"
                      Margin="0,12"
                      Visibility="{Binding IsUpdating,Converter={x:Static local:BooleanToVisibilityConverter.Instance}}">
                    <Border Background="{StaticResource BackgroundMainBrush}"
                            CornerRadius="10"
                            BorderThickness="4"
                            BorderBrush="{StaticResource BorderBaseBrush}">
                        <StackPanel Orientation="Horizontal"
                                    Margin="5"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Center">
                            <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                                       Text="{Binding UpdatingPercentage}"
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       FontSize="{StaticResource FontSizeLarge}"/>
                            <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                                       Text="%"
                                       FontSize="{StaticResource FontSizeLarge}"/>

                        </StackPanel>
                    </Border>
                </Grid>
                
                <!-- Toolbar buttons -->
                <Grid Grid.Column="1" Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="30"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="1" Margin="0,0,2,0"
                            Style="{StaticResource ButtonCleanStyle}"
                            Command="{Binding CommandToggleConfig}">
                        <TextBlock FontFamily="{StaticResource FontAwesomeLight}"
                                   Text="{StaticResource fa-cog}"/>
                    </Button>
                    <Button Grid.Column="2"
                            Style="{StaticResource ButtonCleanStyle}"
                            Command="{Binding CommandMinimize}">
                        <TextBlock FontFamily="{StaticResource FontAwesomeRegular}"
                                   Text="{StaticResource fa-minimize}"
                                   FontSize="14"/>
                    </Button>
                    <Button Grid.Column="3"
                            Style="{StaticResource ButtonCleanStyle}"
                            Command="{Binding CommandClose}">
                        <TextBlock FontFamily="{StaticResource FontAwesomeRegular}"
                                   Text="{StaticResource fa-close}"/>
                    </Button>
                </Grid>
                
                <!-- Client Version -->
                <StackPanel Grid.Row="1" Grid.Column="1"
                            Opacity="0.4"
                            Margin="5,0"
                            VerticalAlignment="Bottom"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                    <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                               Foreground="{StaticResource HighlightMainBrush}"
                               FontFamily="{StaticResource FontAwesomeRegular}"
                               Text="{StaticResource fa-swords}"
                               Margin="0,0,3,0"
                               FontSize="{StaticResource FontSizeSmall}"
                               VerticalAlignment="Center"/>
                    <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                               Foreground="{StaticResource HighlightMainBrush}"
                               Text="Client v"
                               FontSize="{StaticResource FontSizeSmaller}"/>
                    <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                               Foreground="{StaticResource HighlightMainBrush}"
                               Text="{Binding Version}"
                               Margin="0,0,3,0"
                               FontSize="{StaticResource FontSizeSmaller}"/>
                </StackPanel>

            </Grid>
        </Grid>
        
        <!-- Content -->
        <Grid Grid.Row="1" Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="67*"/>
                <ColumnDefinition Width="1"/>
                <ColumnDefinition Width="33*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="66*"/>
                <RowDefinition Height="34*"/>
            </Grid.RowDefinitions>

            <!-- Left side -->
            
            <!-- Video Player -->
            <Border BorderThickness="1"
                    BorderBrush="{StaticResource BorderSectionBrush}">
                <Grid>
                    <!-- The player -->
                    <controls:VideoPlayerControl x:Name="VideoPlayer"
                                                 ResourceName="video"
                                                 ResourceOutputPath="Temp/video.mp4"/>
                    <!-- Title before/after playing -->
                    <Grid Height="48"
                          VerticalAlignment="Bottom"
                          Background="#80000000">
                        <Grid.Style>
                            <Style TargetType="{x:Type Grid}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding DataContext.IsAtStart,ElementName=VideoPlayer}" Value="True">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding DataContext.IsAtFinish,ElementName=VideoPlayer}" Value="True">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>
                        <Button Style="{StaticResource ButtonCleanStyle}"
                                HorizontalAlignment="Left"
                                Command="{Binding CommandOpenLink}"
                                CommandParameter="https://www.facebook.com/ImJellyBitz">
                            <StackPanel>
                                <TextBlock Text="Silkroad Legend: Heroes of Grecia"
                                           Style="{StaticResource SectionStyle}"
                                           FontSize="{StaticResource FontSizeLarge}"
                                           FontWeight="SemiBold"/>
                                <TextBlock Text="The Birth of A New Empire"
                                           Style="{StaticResource SectionStyle}"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </Grid>
            </Border>

            <!-- Section #3 -->
            <Border Grid.Row="1"
                    BorderThickness="1"
                    BorderBrush="{StaticResource BorderSectionBrush}"
                    Background="{StaticResource SectionImage3Brush}">
                <Grid Height="32" 
                      VerticalAlignment="Bottom"
                      Background="#80000000">
                    <Button Style="{StaticResource ButtonCleanStyle}"
                            HorizontalAlignment="Left"
                            Command="{Binding CommandOpenLink}"
                            CommandParameter="https://www.facebook.com/ImJellyBitz">
                        <TextBlock Text="Discover the New Worlds and Fight for the Glory!"
                                   Style="{StaticResource SectionStyle}"/>
                    </Button>
                </Grid>
            </Border>

            <!-- Section #4 -->
            <Border Grid.Row="1" Grid.Column="2"
                    BorderThickness="1"
                    BorderBrush="{StaticResource BorderSectionBrush}"
                    Background="{StaticResource SectionImage4Brush}">
                <Grid Background="#C0000000">
                    <StackPanel VerticalAlignment="Center">
                        <!-- Patch Notes -->
                        <Button Grid.Row="1"
                                Style="{StaticResource ButtonCleanStyle}"
                                Command="{Binding CommandOpenLink}"
                                CommandParameter="https://www.facebook.com/ImJellyBitz">
                            <TextBlock Text="Patch Notes 1.188"
                                       Style="{StaticResource SectionStyle}"
                                       FontWeight="SemiBold"
                                       FontSize="{StaticResource FontSizeXLarge}"
                                       Foreground="{StaticResource SectionPatchBrush}"/>
                        </Button>
                        <TextBlock Text="New Update - June 2020"
                                   HorizontalAlignment="Center"
                                   FontWeight="SemiBold"
                                   Style="{StaticResource SectionStyle}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Right side -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>

                <!-- Section #1 -->
                <Border BorderThickness="1"
                        BorderBrush="{StaticResource BorderSectionBrush}"
                        Background="{StaticResource SectionImage1Brush}">
                    <Grid Height="32" 
                          VerticalAlignment="Bottom"
                          Background="#80000000">
                        <Button Style="{StaticResource ButtonCleanStyle}"
                                HorizontalAlignment="Left"
                                Command="{Binding CommandOpenLink}"
                                CommandParameter="https://www.facebook.com/ImJellyBitz">
                            <TextBlock Text="Last Man Standing, Win or Die"
                                       Style="{StaticResource SectionStyle}"/>
                        </Button>
                    </Grid>
                </Border>

                <!-- Section #2 -->
                <Border Grid.Row="1"
                        BorderThickness="1"
                        BorderBrush="{StaticResource BorderSectionBrush}"
                        Background="{StaticResource SectionImage2Brush}">
                    <Grid Height="32" 
                          VerticalAlignment="Bottom"
                          Background="#80000000">
                        <Button Style="{StaticResource ButtonCleanStyle}"
                                HorizontalAlignment="Left"
                                Command="{Binding CommandOpenLink}"
                                CommandParameter="https://www.facebook.com/ImJellyBitz">
                            <TextBlock Text="Master Yourself, Master the Enemy"
                                       Style="{StaticResource SectionStyle}"/>
                        </Button>
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!-- Setting (as Dialog) -->
        <Grid Grid.Row="1"
              Background="#E0000000"
              Visibility="{Binding IsViewingConfig,Converter={x:Static local:BooleanToVisibilityConverter.Instance}}">
            <!-- Dialog toggle -->
            <Button Command="{Binding CommandToggleConfig}">
                <Button.Style>
                    <Style TargetType="{x:Type Button}" BasedOn="{StaticResource ButtonCleanStyle}">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Cursor" Value="Arrow" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
            <!-- Content -->
            <Border Width="265" Height="260"
                    BorderThickness="2"
                    CornerRadius="10"
                    Background="{StaticResource BackgroundMainBrush}"
                    BorderBrush="{StaticResource BorderSectionBrush}"
                    Padding="20,25,20,15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <!-- Lang -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                                       Text="Set Language "
                                       FontWeight="DemiBold"
                                       FontSize="{StaticResource FontSizeRegular}"
                                       VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" Style="{StaticResource ComboBoxBaseStyle}"
                                      FontSize="{StaticResource FontSizeRegular}"
                                      ItemsSource="{Binding Config.SupportedLanguages}"
                                      SelectedItem="{Binding Config.Language}"/>
                    </Grid>
                    <!-- Resolution -->
                    <Grid Grid.Row="1" Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                                   Text="Set Resolution "
                                   FontWeight="DemiBold"
                                   FontSize="{StaticResource FontSizeRegular}"
                                   VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" Style="{StaticResource ComboBoxBaseStyle}"
                                  FontSize="{StaticResource FontSizeRegular}"
                                  ItemsSource="{Binding Config.SupportedResolutions}"
                                  SelectedItem="{Binding Config.Resolution}"/>
                    </Grid>
                    <!-- Brightness -->
                    <Grid Grid.Row="2" Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                                   Text="Set Brightness "
                                   FontWeight="DemiBold"
                                   FontSize="{StaticResource FontSizeRegular}"
                                   VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" Style="{StaticResource ComboBoxBaseStyle}"
                                  FontSize="{StaticResource FontSizeRegular}"
                                  ItemsSource="{Binding Config.SupportedBrightness}"
                                  SelectedItem="{Binding Config.Brightness}"/>
                    </Grid>
                    <!-- Graphics -->
                    <Grid Grid.Row="3" Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                                   Text="Set Graphics "
                                   FontWeight="DemiBold"
                                   FontSize="{StaticResource FontSizeRegular}"
                                   VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" Style="{StaticResource ComboBoxBaseStyle}"
                                  FontSize="{StaticResource FontSizeRegular}"
                                  ItemsSource="{Binding Config.SupportedGraphics}"
                                  SelectedItem="{Binding Config.Graphics}"/>
                    </Grid>
                    <!-- Tick settings -->
                    <Grid Grid.Row="4" Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <!-- Using sound -->
                        <TextBlock Style="{StaticResource TextBlockBaseStyle}"
                                   Text="Use Sound "
                                   FontWeight="DemiBold"
                                   FontSize="{StaticResource FontSizeRegular}"
                                   VerticalAlignment="Center"/>
                        <CheckBox Grid.Column="1" Style="{StaticResource CheckBoxBaseStyle}"
                                  IsChecked="{Binding Config.IsSoundEnabled}"
                                  VerticalAlignment="Center"/>
                        <!-- Window mode -->
                        <TextBlock Grid.Column="3"  Style="{StaticResource TextBlockBaseStyle}"
                                   Text="Window Mode "
                                   FontWeight="DemiBold"
                                   FontSize="{StaticResource FontSizeRegular}"
                                   VerticalAlignment="Center"/>
                        <CheckBox Grid.Column="4" Style="{StaticResource CheckBoxBaseStyle}"
                                  IsChecked="{Binding Config.IsWindowMode}"
                                  VerticalAlignment="Center"/>
                    </Grid>
                    
                    <!-- Save stuff -->
                    <Grid Grid.Row="6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Style="{StaticResource TextBlockBaseStyle}"
                                   Foreground="{StaticResource HighlightMainBrush}"
                                   Opacity="0.45"
                                   Text="Settings v"
                                   FontWeight="DemiBold"
                                   FontSize="{StaticResource FontSizeSmall}"
                                   VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="2" Style="{StaticResource TextBlockBaseStyle}"
                                   Opacity="0.45"
                                   Foreground="{StaticResource HighlightMainBrush}"
                                   Text="{Binding Config.Version}"
                                   FontWeight="DemiBold"
                                   FontSize="{StaticResource FontSizeSmall}"
                                   VerticalAlignment="Center"/>
                        <Button Grid.Column="3" Style="{StaticResource ButtonBaseStyle}"
                                Command="{Binding CommandSaveConfig}"
                                CommandParameter="https://www.google.com/">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Foreground="{StaticResource ForegroundMainBrush}"
                                           FontFamily="{StaticResource FontAwesomeRegular}"
                                           Text="{StaticResource fa-save}"
                                           FontSize="18"/>
                                <TextBlock Foreground="{StaticResource ForegroundMainBrush}"
                                           Text=" Save"
                                           FontSize="{StaticResource FontSizeRegular}"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>